#!/bin/bash

# Check if chafa is installed
if ! command -v chafa &> /dev/null
then
    echo "chafa could not be found. Please install it to display images."
    exit 1
fi

IMAGE_PATH="$HOME/linusfetch/linus.jpg"

# Calculate Linus Torvalds' age
BIRTH_DATE="1969-12-28"
CURRENT_DATE="$(date +%Y-%m-%d)"
AGE=$(( ($(date -d "$CURRENT_DATE" +%s) - $(date -d "$BIRTH_DATE" +%s)) / (60*60*24*365) ))

# Info lines
info_lines=(
    "Linus Torvalds"
    "--------------"
    "OS: Human"
    "Hostname: Linus Torvalds"
    "Kernel: DNA (version ${AGE})"
    "Uptime: ${AGE} years (still compiling)"
    "Distro: Finnish-American"
    "Packages: Common Sense, Sarcasm, Git, C-language"
    "Shell: Skin (thick-skinned)"
    "Resolution: 1.83m (6 ft)"
    "CPU: Human Heart (pumping passion)"
    "GPU: Human Brain (processing power)"
    "Memory: Lots (especially for code)"
    ""
    'Talk is cheap. Show me the code.'
)

# Display image with info side by side
chafa "$IMAGE_PATH" --size 40x20 --stretch | awk -v info="$(printf "%s\n" "${info_lines[@]}")" '
BEGIN {
    split(info, arr, "\n")
    for (i in arr) info_arr[i] = arr[i]
    line = 1
}
{
    printf "%s   %s\n", $0, (line in info_arr ? info_arr[line] : "")
    line++
}'
